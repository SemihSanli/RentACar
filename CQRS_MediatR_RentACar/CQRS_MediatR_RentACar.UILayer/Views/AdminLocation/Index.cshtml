@model List<GetLocationQueryResult>
@{
	Layout = "~/Views/Shared/_AdminLayout.cshtml";
	ViewData["Title"] = "Lokasyonlar";
}

<div class="container-fluid px-4 py-3">
	<div class="d-flex justify-content-between align-items-center mb-3">
		<h1 class="h5 mb-0">Lokasyonlar (@Model?.Count ?? 0)</h1>
		<a class="btn btn-primary" href="@Url.Action("Create","AdminLocation")">
			<i class="fas fa-plus me-2"></i>Yeni Lokasyon
		</a>
	</div>

	<div class="card shadow-sm">
		<div class="card-body">
			<div class="table-responsive">
				<table id="locationsTable" class="table table-hover align-middle w-100">
					<thead class="table-light">
						<tr>
							<th>ID</th>
							<th>Ad</th>
							<th>Ülke</th>
							<th>Eyalet</th>
							<th>Enlem</th>
							<th>Boylam</th>
							<th style="width:150px;">İşlemler</th>
						</tr>
					</thead>
					<tbody>
						@foreach (var x in Model)
						{
							<tr>
								<td>@x.LocationID</td>
								<td>@x.Name</td>
								<td>@x.CountryCode</td>
								<td>@x.StateCode</td>
								<td>@x.Latitude</td>
								<td>@x.Longitude</td>
								<td>
									<div class="btn-group btn-group-sm">
										<a class="btn btn-outline-primary" href="@Url.Action("Edit","AdminLocation", new { id = x.LocationID })">
											<i class="fas fa-edit me-1"></i>Düzenle
										</a>
										<a class="btn btn-outline-danger"
										   href="@Url.Action("Delete","AdminLocation", new { id = x.LocationID })"
										   onclick="return confirm('Silmek istediğinize emin misiniz?');">
											<i class="fas fa-trash me-1"></i>Sil
										</a>
									</div>
								</td>
							</tr>
						}
					</tbody>
				</table>
			</div>
			<small class="text-muted">İpucu: Sağ üstteki kutudan arama yapabilir, kolon başlıklarına tıklayarak sıralayabilirsiniz.</small>
		</div>
	</div>
	<style>
		body {
			background: radial-gradient(1000px 700px at 10% 0%, rgba(75,63,149,.10), transparent 60%), radial-gradient(900px 600px at 100% 20%, rgba(106,89,200,.10), transparent 60%), linear-gradient(180deg, #E7DFEE 0%, #C5D6E6 50%, #79B1D3 100%);
			color: #0F172A;
			min-height: 100vh;
		}

	</style>
</div>

@section Scripts {
	<link rel="stylesheet" href="https://cdn.datatables.net/1.13.8/css/dataTables.bootstrap5.min.css" />
	<script src="https://cdn.datatables.net/1.13.8/js/jquery.dataTables.min.js"></script>
	<script src="https://cdn.datatables.net/1.13.8/js/dataTables.bootstrap5.min.js"></script>

	<script>
		$(function () {
			$('#locationsTable').DataTable({
				deferRender: true,
				pageLength: 25,
				lengthMenu: [10, 25, 50, 100, 250, 500],
				order: [[1, 'asc']],
				language: { url: '//cdn.datatables.net/plug-ins/1.13.7/i18n/tr.json' },
				columnDefs: [
					{ targets: [0], width: 60 },
					{ targets: [6], orderable: false, searchable: false }
				]
			});
		});
	</script>
}
